<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoadSide+ Emergency Assistance</title>
    <link rel="stylesheet" href="style.css">
</head>
<body data-color-scheme="dark">
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="logo">ğŸš— RoadSide+</div>
            <div class="loading-spinner"></div>
            <p>Emergency Assistance Ready</p>
        </div>
    </div>

    <!-- Login Screen -->
    <div id="login-screen" class="screen hidden">
        <div class="auth-container">
            <div class="auth-header">
                <h1>ğŸš— RoadSide+</h1>
                <p>Emergency Roadside Assistance</p>
            </div>
            <div class="auth-form">
                <div class="form-group">
                    <label class="form-label">Email</label>
                    <input type="email" class="form-control" placeholder="Enter your email">
                </div>
                <div class="form-group">
                    <label class="form-label">Password</label>
                    <input type="password" class="form-control" placeholder="Enter your password">
                </div>
                <button class="btn btn--primary btn--full-width" onclick="login()">Sign In</button>
                <div class="auth-divider">
                    <span>or</span>
                </div>
                <button class="btn btn--outline btn--full-width" onclick="showRegister()">Create Account</button>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="main-app" class="hidden">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-left">
                <button class="hamburger-btn" onclick="toggleNavDrawer()">â˜°</button>
                <div class="logo-nav">ğŸš— RoadSide+</div>
            </div>
            <div class="nav-right">
                <div class="user-info">
                    <span class="user-name">John Doe</span>
                    <div class="user-avatar">JD</div>
                </div>
            </div>
        </nav>

        <!-- Navigation Drawer -->
        <div id="nav-drawer" class="nav-drawer">
            <div class="nav-drawer-header">
                <h3>Navigation</h3>
                <button class="close-btn" onclick="closeNavDrawer()">Ã—</button>
            </div>
            <div class="nav-drawer-content">
                <div class="nav-item active" onclick="showDashboard('customer')">
                    <span class="nav-icon">ğŸ‘¤</span>
                    <span>Customer Dashboard</span>
                </div>
                <div class="nav-item" onclick="showDashboard('technician')">
                    <span class="nav-icon">ğŸ”§</span>
                    <span>Technician Dashboard</span>
                </div>
                <div class="nav-item" onclick="showDashboard('admin')">
                    <span class="nav-icon">âš™ï¸</span>
                    <span>Admin Dashboard</span>
                </div>
                <div class="nav-item" onclick="showDashboard('partner')">
                    <span class="nav-icon">ğŸ¤</span>
                    <span>Partner Dashboard</span>
                </div>
                <div class="nav-item" onclick="showDashboard('security')">
                    <span class="nav-icon">ğŸ›¡ï¸</span>
                    <span>Security Dashboard</span>
                </div>
            </div>
        </div>

        <!-- Dashboard Tabs -->
        <div class="dashboard-tabs">
            <div class="tab active" onclick="showDashboard('customer')" role="button" tabindex="0">
                <span>ğŸ‘¤</span> Customer
            </div>
            <div class="tab" onclick="showDashboard('technician')" role="button" tabindex="0">
                <span>ğŸ”§</span> Technician
            </div>
            <div class="tab" onclick="showDashboard('admin')" role="button" tabindex="0">
                <span>âš™ï¸</span> Admin
            </div>
            <div class="tab" onclick="showDashboard('partner')" role="button" tabindex="0">
                <span>ğŸ¤</span> Partner
            </div>
            <div class="tab" onclick="showDashboard('security')" role="button" tabindex="0">
                <span>ğŸ›¡ï¸</span> Security
            </div>
        </div>

        <!-- Dashboard View -->
        <div id="dashboard-view" class="view active">
            <!-- Customer Dashboard Content -->
            <div id="customer-dashboard" class="dashboard-content active">
            <!-- Emergency Banner -->
            <div class="emergency-banner">
                <div class="emergency-content">
                    <span class="emergency-icon">ğŸš¨</span>
                    <div class="emergency-text">
                        <h3>Emergency Assistance</h3>
                        <p>24/7 immediate response</p>
                    </div>
                    <button class="emergency-btn" onclick="emergencyCall()">SOS</button>
                </div>
            </div>

            <!-- Services Grid -->
            <div class="services-section">
                <h2>Select Service</h2>
                <div class="services-grid">
                    <div class="service-card" onclick="selectService(1, 'Towing', 150)">
                        <div class="service-icon">ğŸš›</div>
                        <h3>Towing</h3>
                        <p class="service-price">$150</p>
                        <p class="service-time">45 min â€¢ 30 min response</p>
                    </div>
                    <div class="service-card" onclick="selectService(2, 'Battery Jump', 75)">
                        <div class="service-icon">ğŸ”‹</div>
                        <h3>Battery Jump</h3>
                        <p class="service-price">$75</p>
                        <p class="service-time">20 min â€¢ 30 min response</p>
                    </div>
                    <div class="service-card" onclick="selectService(3, 'Tire Change', 100)">
                        <div class="service-icon">ğŸ›</div>
                        <h3>Tire Change</h3>
                        <p class="service-price">$100</p>
                        <p class="service-time">30 min â€¢ 30 min response</p>
                    </div>
                    <div class="service-card" onclick="selectService(4, 'Lockout', 85)">
                        <div class="service-icon">ğŸ”“</div>
                        <h3>Lockout</h3>
                        <p class="service-price">$85</p>
                        <p class="service-time">20 min â€¢ 30 min response</p>
                    </div>
                    <div class="service-card" onclick="selectService(5, 'Fuel Delivery', 60)">
                        <div class="service-icon">â›½</div>
                        <h3>Fuel Delivery</h3>
                        <p class="service-price">$60</p>
                        <p class="service-time">15 min â€¢ 30 min response</p>
                    </div>
                    <div class="service-card" onclick="selectService(6, 'Winch Recovery', 200)">
                        <div class="service-icon">ğŸª</div>
                        <h3>Winch Recovery</h3>
                        <p class="service-price">$200</p>
                        <p class="service-time">60 min â€¢ 45 min response</p>
                    </div>
                </div>
            </div>

            <!-- Recent Services -->
            <div class="recent-section">
                <h2>Recent Services</h2>
                <div id="recent-services" class="service-history">
                    <!-- Recent services will be populated by JavaScript -->
                </div>
            </div>

            <!-- Dashboard Stats -->
            <div class="stats-section">
                <h2>Your Stats</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“Š</div>
                        <div class="stat-value" id="total-services">0</div>
                        <div class="stat-label">Total Services</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ’°</div>
                        <div class="stat-value" id="total-spent">$0</div>
                        <div class="stat-label">Total Spent</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">â­</div>
                        <div class="stat-value" id="avg-rating">0.0</div>
                        <div class="stat-label">Avg Rating</div>
                    </div>
                </div>
            </div>
            </div>
            
            <!-- Technician Dashboard Content -->
            <div id="technician-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2>ğŸ”§ Technician Dashboard</h2>
                    <p>Manage your service assignments and availability</p>
                </div>
                
                <div class="technician-stats">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“‹</div>
                        <div class="stat-value">3</div>
                        <div class="stat-label">Active Jobs</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">â­</div>
                        <div class="stat-value">4.8</div>
                        <div class="stat-label">Rating</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ’°</div>
                        <div class="stat-value">$1,240</div>
                        <div class="stat-label">Today's Earnings</div>
                    </div>
                </div>
                
                <div class="availability-controls">
                    <h3>Availability Status</h3>
                    <div class="availability-toggle">
                        <label class="toggle-switch">
                            <input type="checkbox" id="availability-toggle" checked>
                            <span class="toggle-slider"></span>
                        </label>
                        <span class="availability-status">Available</span>
                    </div>
                </div>
                
                <div class="job-assignments">
                    <h3>Current Assignments</h3>
                    <div class="job-list">
                        <div class="job-item">
                            <div class="job-info">
                                <h4>ğŸš› Towing - Downtown</h4>
                                <p>ğŸ“ 123 Main St, City</p>
                                <p>â° ETA: 15 minutes</p>
                            </div>
                            <div class="job-actions">
                                <button class="btn btn--sm btn--primary">Start Job</button>
                                <button class="btn btn--sm btn--outline">Call Customer</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Admin Dashboard Content -->
            <div id="admin-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2>âš™ï¸ Admin Dashboard</h2>
                    <p>System administration and management</p>
                </div>
                
                <div class="admin-stats">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ‘¥</div>
                        <div class="stat-value">45</div>
                        <div class="stat-label">Active Users</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ”§</div>
                        <div class="stat-value">12</div>
                        <div class="stat-label">Technicians</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“Š</div>
                        <div class="stat-value">89%</div>
                        <div class="stat-label">System Health</div>
                    </div>
                </div>
                
                <div class="admin-actions">
                    <h3>Quick Actions</h3>
                    <div class="action-grid">
                        <button class="action-btn" onclick="manageUsers()">
                            <span class="action-icon">ğŸ‘¥</span>
                            <span>Manage Users</span>
                        </button>
                        <button class="action-btn" onclick="manageTechnicians()">
                            <span class="action-icon">ğŸ”§</span>
                            <span>Manage Technicians</span>
                        </button>
                        <button class="action-btn" onclick="viewAnalytics()">
                            <span class="action-icon">ğŸ“Š</span>
                            <span>View Analytics</span>
                        </button>
                        <button class="action-btn" onclick="systemSettings()">
                            <span class="action-icon">âš™ï¸</span>
                            <span>System Settings</span>
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Partner Dashboard Content -->
            <div id="partner-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2>ğŸ¤ Partner Dashboard</h2>
                    <p>Business partnership and collaboration tools</p>
                </div>
                
                <div class="partner-stats">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ“ˆ</div>
                        <div class="stat-value">156</div>
                        <div class="stat-label">Referrals</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ’°</div>
                        <div class="stat-value">$3,420</div>
                        <div class="stat-label">Commission</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ¯</div>
                        <div class="stat-value">78%</div>
                        <div class="stat-label">Conversion Rate</div>
                    </div>
                </div>
                
                <div class="partner-tools">
                    <h3>Partner Tools</h3>
                    <div class="tool-grid">
                        <div class="tool-card">
                            <h4>ğŸ“Š Analytics</h4>
                            <p>Track performance metrics</p>
                            <button class="btn btn--sm" onclick="viewPartnerReports()">View Reports</button>
                        </div>
                        <div class="tool-card">
                            <h4>ğŸ”— Referral Links</h4>
                            <p>Generate tracking links</p>
                            <button class="btn btn--sm" onclick="createReferralLink()">Create Link</button>
                        </div>
                        <div class="tool-card">
                            <h4>ğŸ’¼ Resources</h4>
                            <p>Marketing materials</p>
                            <button class="btn btn--sm" onclick="downloadMarketingResources()">Download</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Security Dashboard Content -->
            <div id="security-dashboard" class="dashboard-content">
                <div class="dashboard-header">
                    <h2>ğŸ›¡ï¸ Security Dashboard</h2>
                    <p>Security monitoring and incident management</p>
                </div>
                
                <div class="security-stats">
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ”’</div>
                        <div class="stat-value">99.9%</div>
                        <div class="stat-label">Security Score</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">âš ï¸</div>
                        <div class="stat-value">2</div>
                        <div class="stat-label">Active Alerts</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">ğŸ”</div>
                        <div class="stat-value">0</div>
                        <div class="stat-label">Incidents</div>
                    </div>
                </div>
                
                <div class="security-monitoring">
                    <h3>Security Monitoring</h3>
                    <div class="monitoring-grid">
                        <div class="monitor-card">
                            <h4>ğŸ” Authentication</h4>
                            <p>Login attempts and security</p>
                            <span class="status-badge success">Normal</span>
                        </div>
                        <div class="monitor-card">
                            <h4>ğŸŒ Network</h4>
                            <p>Traffic and intrusion detection</p>
                            <span class="status-badge success">Secure</span>
                        </div>
                        <div class="monitor-card">
                            <h4>ğŸ“Š Data</h4>
                            <p>Data integrity and backup</p>
                            <span class="status-badge warning">Monitoring</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- History View -->
        <div id="history-view" class="view">
            <div class="view-header">
                <h2>Service History</h2>
                <p>Your complete service record</p>
            </div>
            <div id="service-history-list" class="history-list">
                <!-- Service history will be populated by JavaScript -->
            </div>
        </div>

        <!-- Profile View -->
        <div id="profile-view" class="view">
            <div class="view-header">
                <h2>Profile Settings</h2>
                <p>Manage your account and preferences</p>
            </div>
            
            <div class="profile-content">
                <div class="profile-stats">
                    <div class="stat-item">
                        <span class="stat-label">Total Services</span>
                        <span class="stat-value" id="profile-total-services">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Total Spent</span>
                        <span class="stat-value" id="profile-total-spent">$0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Avg Rating</span>
                        <span class="stat-value" id="profile-avg-rating">0.0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Member Since</span>
                        <span class="stat-value" id="profile-member-since">2023</span>
                    </div>
                </div>
                
                <div class="profile-form">
                    <h3>Personal Information</h3>
                    <div class="form-group">
                        <label class="form-label">Full Name</label>
                        <input type="text" id="profile-name" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" id="profile-email" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Phone</label>
                        <input type="tel" id="profile-phone" class="form-control">
                    </div>
                    
                    <h3>Emergency Contact</h3>
                    <div class="form-group">
                        <label class="form-label">Contact Name</label>
                        <input type="text" id="emergency-contact-name" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Contact Phone</label>
                        <input type="tel" id="emergency-contact-phone" class="form-control">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Relationship</label>
                        <select id="emergency-contact-relationship" class="form-control">
                            <option value="Spouse">Spouse</option>
                            <option value="Parent">Parent</option>
                            <option value="Child">Child</option>
                            <option value="Sibling">Sibling</option>
                            <option value="Friend">Friend</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    
                    <h3>Preferences</h3>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="notifications-enabled"> Enable push notifications
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="location-enabled"> Share location for faster service
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" id="dark-mode-enabled"> Dark mode
                        </label>
                    </div>
                    
                    <button onclick="saveProfile()" class="btn btn--primary btn--full-width">Save Changes</button>
                </div>
            </div>
        </div>

        <!-- Support View -->
        <div id="support-view" class="view">
            <div class="view-header">
                <h2>Support Center</h2>
                <p>Get help when you need it</p>
                <button onclick="createSupportTicket()" class="btn btn--primary">New Support Request</button>
            </div>
            
            <div class="support-content">
                <div class="support-quick-actions">
                    <div class="quick-action" onclick="alert('Emergency: Call 911\nRoadSide+: 1-800-ROADSIDE')">
                        <div class="action-icon">ğŸ“</div>
                        <h4>Emergency Contact</h4>
                        <p>Get immediate assistance</p>
                    </div>
                    <div class="quick-action" onclick="alert('FAQ topics:\nâ€¢ Service pricing\nâ€¢ Coverage areas\nâ€¢ How to book\nâ€¢ Cancellation policy')">
                        <div class="action-icon">â“</div>
                        <h4>FAQ</h4>
                        <p>Common questions</p>
                    </div>
                    <div class="quick-action" onclick="alert('Live chat available 24/7\nAverage response: 2 minutes')">
                        <div class="action-icon">ğŸ’¬</div>
                        <h4>Live Chat</h4>
                        <p>Chat with support</p>
                    </div>
                </div>
                
                <div class="support-tickets-section">
                    <h3>Your Support Tickets</h3>
                    <div id="support-tickets">
                        <!-- Support tickets will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Booking Modal -->
        <div id="booking-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Book Service</h2>
                    <button class="close-btn" onclick="closeBookingModal()">Ã—</button>
                </div>
                <div class="booking-steps">
                    <div class="step active" data-step="1">Service</div>
                    <div class="step" data-step="2">Location</div>
                    <div class="step" data-step="3">Payment</div>
                    <div class="step" data-step="4">Confirm</div>
                </div>
                <div class="modal-body">
                    <!-- Dynamic content will be populated by booking-workflow.js -->
                </div>
            </div>
        </div>

        <!-- Tracking Modal -->
        <div id="tracking-modal" class="modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Service Tracking</h2>
                    <button class="close-btn" onclick="closeTrackingModal()">Ã—</button>
                </div>
                <div class="modal-body">
                    <div class="tracking-status">
                        <div class="status-icon">ğŸš—</div>
                        <h3>Technician En Route</h3>
                        <p>ETA: <span id="eta-time">15 minutes</span></p>
                    </div>
                    <div class="tracking-map">
                        <div class="map-placeholder">
                            <div class="map-marker">ğŸ“</div>
                            <p>GPS Tracking Active</p>
                        </div>
                    </div>
                    <div class="technician-info">
                        <div class="tech-avatar">ğŸ‘¨â€ğŸ”§</div>
                        <div class="tech-details">
                            <h4>Mike Rodriguez</h4>
                            <p>Certified Technician â€¢ 4.9â˜…</p>
                        </div>
                        <button class="btn btn--outline btn--sm" onclick="callTechnician()">ğŸ“ Call</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" data-view="dashboard">
                <div class="nav-icon">ğŸ‘¤</div>
                <span>Dashboard</span>
            </div>
            <div class="nav-item" data-view="history">
                <div class="nav-icon">ğŸ“‹</div>
                <span>History</span>
            </div>
            <div class="emergency-sos" onclick="emergencyCall()">
                <div class="sos-button">SOS</div>
            </div>
            <div class="nav-item" data-view="support">
                <div class="nav-icon">ğŸ’¬</div>
                <span>Support</span>
            </div>
            <div class="nav-item" data-view="profile">
                <div class="nav-icon">ğŸ‘¤</div>
                <span>Profile</span>
            </div>
        </div>
    </div>

    <script type="module" src="booking-workflow.js"></script>
    <script type="module" src="app.js"></script>
    <script type="module" src="mock-api.js"></script>
</body>
</html>