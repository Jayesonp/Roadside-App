<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RoadSide+ Emergency Assistance</title>
    <style>
        /* Critical CSS for initial loading */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            transition: opacity 0.5s ease;
        }
        
        .loading-screen.hidden {
            opacity: 0;
            pointer-events: none;
        }
        
        .loading-content {
            text-align: center;
        }
        
        .logo {
            font-size: 3rem;
            font-weight: bold;
            margin-bottom: 2rem;
            animation: pulse 2s infinite;
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(255, 255, 255, 0.3);
            border-top: 4px solid white;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 1rem;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
        
        .main-app {
            min-height: 100vh;
            display: none;
        }
        
        .main-app.active {
            display: block;
        }
    </style>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen" class="loading-screen">
        <div class="loading-content">
            <div class="logo">🚗 RoadSide+</div>
            <div class="loading-spinner"></div>
            <p>Emergency Assistance Ready</p>
        </div>
    </div>

    <!-- Main App -->
    <div id="main-app" class="main-app">
        <!-- Navigation -->
        <nav class="navbar">
            <div class="nav-left">
                <button class="hamburger-btn" onclick="toggleNavDrawer()">☰</button>
                <div class="logo-nav">🚗 RoadSide+</div>
            </div>
            <div class="nav-right">
                <div class="user-info">
                    <span class="user-name">John Doe</span>
                    <div class="user-avatar">JD</div>
                </div>
            </div>
        </nav>

        <!-- Navigation Drawer -->
        <div id="nav-drawer" class="nav-drawer">
            <div class="nav-drawer-header">
                <h3>Navigation</h3>
                <button class="close-btn" onclick="closeNavDrawer()">×</button>
            </div>
            <div class="nav-drawer-content">
                <div class="nav-item active" onclick="showDashboard('customer')">
                    <span class="nav-icon">👤</span>
                    <span>Customer Dashboard</span>
                </div>
                <div class="nav-item" onclick="showDashboard('technician')">
                    <span class="nav-icon">🔧</span>
                    <span>Technician Dashboard</span>
                </div>
                <div class="nav-item" onclick="showDashboard('admin')">
                    <span class="nav-icon">⚙️</span>
                    <span>Admin Dashboard</span>
                </div>
                <div class="nav-item" onclick="showDashboard('partner')">
                    <span class="nav-icon">🤝</span>
                    <span>Partner Dashboard</span>
                </div>
                <div class="nav-item" onclick="showDashboard('security')">
                    <span class="nav-icon">🛡️</span>
                    <span>Security Dashboard</span>
                </div>
            </div>
        </div>

        <!-- Dashboard Tabs -->
        <div class="dashboard-tabs">
            <div class="tab active" onclick="showDashboard('customer')" role="button" tabindex="0">
                <span>👤</span> Customer
            </div>
            <div class="tab" onclick="showDashboard('technician')" role="button" tabindex="0">
                <span>🔧</span> Technician
            </div>
            <div class="tab" onclick="showDashboard('admin')" role="button" tabindex="0">
                <span>⚙️</span> Admin
            </div>
            <div class="tab" onclick="showDashboard('partner')" role="button" tabindex="0">
                <span>🤝</span> Partner
            </div>
            <div class="tab" onclick="showDashboard('security')" role="button" tabindex="0">
                <span>🛡️</span> Security
            </div>
        </div>

        <!-- Dashboard View -->
        <div id="dashboard-view" class="view active">
            <!-- Emergency Banner -->
            <div class="emergency-banner">
                <div class="emergency-content">
                    <span class="emergency-icon">🚨</span>
                    <div class="emergency-text">
                        <h3>Emergency Assistance</h3>
                        <p>24/7 immediate response</p>
                    </div>
                    <button class="emergency-btn" onclick="emergencyCall()">SOS</button>
                </div>
            </div>

            <!-- Services Grid -->
            <div class="services-section">
                <h2>Select Service</h2>
                <div class="services-grid">
                    <div class="service-card" onclick="selectService(1, 'Towing', 150)">
                        <div class="service-icon">🚛</div>
                        <h3>Towing</h3>
                        <p class="service-price">$150</p>
                        <p class="service-time">45 min • 30 min response</p>
                    </div>
                    <div class="service-card" onclick="selectService(2, 'Battery Jump', 75)">
                        <div class="service-icon">🔋</div>
                        <h3>Battery Jump</h3>
                        <p class="service-price">$75</p>
                        <p class="service-time">20 min • 30 min response</p>
                    </div>
                    <div class="service-card" onclick="selectService(3, 'Tire Change', 100)">
                        <div class="service-icon">🛞</div>
                        <h3>Tire Change</h3>
                        <p class="service-price">$100</p>
                        <p class="service-time">30 min • 30 min response</p>
                    </div>
                    <div class="service-card" onclick="selectService(4, 'Lockout', 85)">
                        <div class="service-icon">🔓</div>
                        <h3>Lockout</h3>
                        <p class="service-price">$85</p>
                        <p class="service-time">20 min • 30 min response</p>
                    </div>
                    <div class="service-card" onclick="selectService(5, 'Fuel Delivery', 60)">
                        <div class="service-icon">⛽</div>
                        <h3>Fuel Delivery</h3>
                        <p class="service-price">$60</p>
                        <p class="service-time">15 min • 30 min response</p>
                    </div>
                    <div class="service-card" onclick="selectService(6, 'Winch Recovery', 200)">
                        <div class="service-icon">🪝</div>
                        <h3>Winch Recovery</h3>
                        <p class="service-price">$200</p>
                        <p class="service-time">60 min • 45 min response</p>
                    </div>
                </div>
            </div>

            <!-- Recent Services -->
            <div class="recent-section">
                <h2>Recent Services</h2>
                <div id="recent-services" class="service-history">
                    <div class="service-item">
                        <div class="service-info">
                            <h4>Battery Jump</h4>
                            <p>Dec 15, 2024 • 123 Main St</p>
                        </div>
                        <div class="service-status completed">Completed</div>
                        <div class="service-price">$75</div>
                    </div>
                    <div class="service-item">
                        <div class="service-info">
                            <h4>Tire Change</h4>
                            <p>Dec 10, 2024 • 456 Oak Ave</p>
                        </div>
                        <div class="service-status completed">Completed</div>
                        <div class="service-price">$100</div>
                    </div>
                </div>
            </div>

            <!-- Dashboard Stats -->
            <div class="stats-section">
                <h2>Your Stats</h2>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">📊</div>
                        <div class="stat-value" id="total-services">12</div>
                        <div class="stat-label">Total Services</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">💰</div>
                        <div class="stat-value" id="total-spent">$1,245</div>
                        <div class="stat-label">Total Spent</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">⭐</div>
                        <div class="stat-value" id="avg-rating">4.8</div>
                        <div class="stat-label">Avg Rating</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Support View -->
        <div id="support-view" class="view">
            <div class="view-header">
                <h2>Support Center</h2>
                <p>Get help when you need it</p>
                <button onclick="openNewSupportRequest()" class="btn btn--primary">New Support Request</button>
            </div>
            
            <div class="support-content">
                <div class="support-quick-actions">
                    <div class="quick-action" onclick="openEmergencyContact()">
                        <div class="action-icon">📞</div>
                        <h4>Emergency Contact</h4>
                        <p>Get immediate assistance</p>
                    </div>
                    <div class="quick-action" onclick="openFAQ()">
                        <div class="action-icon">❓</div>
                        <h4>FAQ</h4>
                        <p>Common questions</p>
                    </div>
                    <div class="quick-action" onclick="openLiveChat()">
                        <div class="action-icon">💬</div>
                        <h4>Live Chat</h4>
                        <p>Chat with support</p>
                    </div>
                </div>
                
                <div class="support-tickets-section">
                    <h3>Your Support Tickets</h3>
                    <div id="support-tickets">
                        <div class="support-ticket">
                            <div class="ticket-info">
                                <h4>Billing Question</h4>
                                <p>Ticket #12345 • Dec 15, 2024</p>
                            </div>
                            <div class="ticket-status open">Open</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Bottom Navigation -->
        <div class="bottom-nav">
            <div class="nav-item active" data-view="dashboard" onclick="showView('dashboard')">
                <div class="nav-icon">🏠</div>
                <span>Dashboard</span>
            </div>
            <div class="nav-item" data-view="history" onclick="showView('history')">
                <div class="nav-icon">📋</div>
                <span>History</span>
            </div>
            <div class="emergency-sos" onclick="emergencyCall()">
                <div class="sos-button">SOS</div>
            </div>
            <div class="nav-item" data-view="support" onclick="showView('support')">
                <div class="nav-icon">💬</div>
                <span>Support</span>
            </div>
            <div class="nav-item" data-view="profile" onclick="showView('profile')">
                <div class="nav-icon">👤</div>
                <span>Profile</span>
            </div>
        </div>
    </div>

    <script>
        // Initialize app immediately
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, initializing app...');
            initializeApp();
        });

        // Fallback initialization
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initializeApp);
        } else {
            initializeApp();
        }

        function initializeApp() {
            console.log('Initializing RoadSide+ app...');
            
            // Show loading screen
            const loadingScreen = document.getElementById('loading-screen');
            const mainApp = document.getElementById('main-app');
            
            if (!loadingScreen || !mainApp) {
                console.error('Critical elements not found');
                return;
            }
            
            // Transition to main app after 2 seconds
            setTimeout(() => {
                loadingScreen.classList.add('hidden');
                mainApp.classList.add('active');
                console.log('App loaded successfully!');
            }, 2000);
        }

        // Core app functions
        function showDashboard(type) {
            console.log('Showing dashboard:', type);
            // Update active tab
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            event.target.classList.add('active');
        }

        function showView(viewName) {
            console.log('Showing view:', viewName);
            // Update bottom nav
            document.querySelectorAll('.bottom-nav .nav-item').forEach(item => item.classList.remove('active'));
            event.target.classList.add('active');
        }

        function selectService(id, name, price) {
            console.log('Service selected:', name, price);
            alert(`Selected: ${name} - $${price}\n\nBooking functionality coming soon!`);
        }

        function emergencyCall() {
            alert('🚨 Emergency SOS Activated!\n\nConnecting to emergency services...');
        }

        function toggleNavDrawer() {
            const drawer = document.getElementById('nav-drawer');
            if (drawer) {
                drawer.classList.toggle('open');
            }
        }

        function closeNavDrawer() {
            const drawer = document.getElementById('nav-drawer');
            if (drawer) {
                drawer.classList.remove('open');
            }
        }

        function openNewSupportRequest() {
            alert('Opening support request form...');
        }

        function openEmergencyContact() {
            alert('Emergency Contact:\n\n📞 1-800-ROADSIDE\n🚨 Available 24/7');
        }

        function openFAQ() {
            alert('FAQ Section:\n\n• How do I book a service?\n• What areas do you cover?\n• How much does it cost?\n\nFull FAQ coming soon!');
        }

        function openLiveChat() {
            alert('Live Chat:\n\n💬 Connecting to support agent...\n⏱️ Average wait time: 2 minutes');
        }

        console.log('RoadSide+ JavaScript loaded');
    </script>
    <script src="app.js"></script>
</body>
</html>